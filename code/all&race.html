<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
    function promiseAll(promises){
        var res=[],count=1;
        return new Promise((resolve,reject)=>{
            for(let i=0;i<promises.length;i++){
                promises[i].then(v=>{
                    count++;
                    res[i]=v;
                    if(count==promises.length){
                        resolve(res);
                    }
                },r=>{
                    reject(r);
                })
            }
        })
    }

    function promiseRace(promises){
        return new Promise((resolve,reject)=>{
            for(let i=0;i<promises.length;i++){
                promises[i].then(v=>{
                    resolve(v);
                },r=>{
                    reject(r);
                })
            }
        })
    }
    let p1=new Promise((resolve,reject)=>{
        setTimeout(()=>{resolve("OK1");},1000);
    })
    let p2=new Promise((resolve,reject)=>{
        resolve("OK2");
    })
    let p3=new Promise((resolve,reject)=>{
        resolve("OK3");
    })

    console.log(promiseAll([p1,p2,p3]));
    console.log(promiseRace([p1,p2,p3]));
    </script>
</body>
</html>